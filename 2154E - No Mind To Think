#include <iostream>
#include <cstdio>
#include <vector>
#include <cmath>
#include <algorithm>
using namespace std;
using ll = long long;
 
int main()
{
	ios::sync_with_stdio(false);
	cin.tie(nullptr);
 
	int _;
	cin >> _;
	while (_--)
	{
		int n, k;
		cin >> n >> k;
		vector<ll> a(n + 1);
		for (int i = 1; i <= n; i++) cin >> a[i];
		sort(a.begin(), a.end());
 
		vector<ll> psums(n + 1, 0);
		for (int i = 1; i <= n; i++) psums[i] = psums[i - 1] + a[i];
 
		ll ans = psums[n];
		for (int i = 1; i <= n; i++)
		{
			int l = 0, r = min(i - 1, n - i);
			while (l < r)
			{
				int mid = l + (r - l + 1) / 2;
 
				int mxind1 = i - 1;
				if (mid <= (i - 1) / k) mxind1 = mid * k;
 
				int mxind2 = i - 1;
				if (mid - 1 <= (i - 1) / k) mxind2 = (mid - 1) * k;
 
				ll diff = a[i] * (mxind1 - mxind2 + 1) - a[i + mid] - (psums[mxind1] - psums[mxind2]);
				if (diff > 0) l = mid;
				else r = mid - 1;
			}
 
			int mxind = i - 1;
			if (l <= (i - 1) / k) mxind = k * l;
			ans = max(ans, psums[n] + a[i] * (mxind + l) - psums[mxind] - (psums[i + l] - psums[i]));
		}
 
		cout << ans << "\n";
	}
}
