#include <iostream>
#include <cstdio>
#include <vector>
#include <cmath>
using namespace std;
using ll = long long;
 
const ll MOD = 998244353;
 
ll pw(ll b, ll e)
{
	if (e == 0) return 1;
	if (e % 2 == 1) return (pw(b, e - 1) * b) % MOD;
	ll ans = pw(b, e / 2);
	return (ans * ans) % MOD;
}
 
int main()
{
	ios::sync_with_stdio(false);
	cin.tie(nullptr);
 
	int _;
	cin >> _;
	while (_--)
	{
		int n;
		cin >> n;
		vector<int> countnums(n, 0);
		for (int i = 0; i < n; i++)
		{
			int a;
			cin >> a;
			countnums[a]++;
		}
 
		vector<ll> dp(n + 1, 1);
		ll ans = 0, mult = pw(2, n);
		for (int i = 0; i < n; i++)
		{
			mult = (mult * pw(2, MOD - 1 - countnums[i])) % MOD;
			while (dp.size() > countnums[i] + 1) dp.pop_back();
 
			ll add = 1, currsum = 0;
			for (int j = countnums[i]; j > -1; j--)
			{
				currsum = (currsum + add) % MOD;
				add = (add * j) % MOD;
				add = (add * pw(countnums[i] - j + 1, MOD - 2)) % MOD;
				if (j < dp.size())
				{
					dp[j] = (dp[j] * currsum) % MOD;
					if (j > 0) ans = (ans + dp[j] * mult) % MOD;
				}
			}
		}
 
		cout << ans << "\n";
	}
}
